<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=cGvuclDC_Z1vE_cnVEU6Ae_NZQ7StBcqH_vXVqoPMX0);.lst-kix_3n4iqtjax4j3-0>li{counter-increment:lst-ctn-kix_3n4iqtjax4j3-0}ol.lst-kix_tp6zooze0zhc-0{list-style-type:none}ol.lst-kix_tp6zooze0zhc-1{list-style-type:none}ol.lst-kix_tp6zooze0zhc-2{list-style-type:none}ol.lst-kix_tp6zooze0zhc-3{list-style-type:none}ol.lst-kix_tp6zooze0zhc-4{list-style-type:none}.lst-kix_tp6zooze0zhc-3>li{counter-increment:lst-ctn-kix_tp6zooze0zhc-3}ol.lst-kix_tp6zooze0zhc-5{list-style-type:none}ol.lst-kix_tp6zooze0zhc-6{list-style-type:none}ol.lst-kix_tp6zooze0zhc-7{list-style-type:none}ol.lst-kix_tp6zooze0zhc-8{list-style-type:none}.lst-kix_tp6zooze0zhc-8>li{counter-increment:lst-ctn-kix_tp6zooze0zhc-8}.lst-kix_tp6zooze0zhc-2>li{counter-increment:lst-ctn-kix_tp6zooze0zhc-2}ol.lst-kix_tp6zooze0zhc-7.start{counter-reset:lst-ctn-kix_tp6zooze0zhc-7 0}ol.lst-kix_3n4iqtjax4j3-1.start{counter-reset:lst-ctn-kix_3n4iqtjax4j3-1 0}.lst-kix_3n4iqtjax4j3-6>li{counter-increment:lst-ctn-kix_3n4iqtjax4j3-6}ol.lst-kix_tp6zooze0zhc-4.start{counter-reset:lst-ctn-kix_tp6zooze0zhc-4 0}ol.lst-kix_3n4iqtjax4j3-6.start{counter-reset:lst-ctn-kix_3n4iqtjax4j3-6 0}.lst-kix_tp6zooze0zhc-0>li:before{content:"" counter(lst-ctn-kix_tp6zooze0zhc-0,decimal) ". "}.lst-kix_3n4iqtjax4j3-2>li{counter-increment:lst-ctn-kix_3n4iqtjax4j3-2}.lst-kix_tp6zooze0zhc-1>li:before{content:"" counter(lst-ctn-kix_tp6zooze0zhc-1,lower-latin) ". "}.lst-kix_tp6zooze0zhc-2>li:before{content:"" counter(lst-ctn-kix_tp6zooze0zhc-2,lower-roman) ". "}ol.lst-kix_tp6zooze0zhc-6.start{counter-reset:lst-ctn-kix_tp6zooze0zhc-6 0}.lst-kix_tp6zooze0zhc-3>li:before{content:"" counter(lst-ctn-kix_tp6zooze0zhc-3,decimal) ". "}.lst-kix_tp6zooze0zhc-4>li:before{content:"" counter(lst-ctn-kix_tp6zooze0zhc-4,lower-latin) ". "}.lst-kix_3n4iqtjax4j3-8>li{counter-increment:lst-ctn-kix_3n4iqtjax4j3-8}.lst-kix_3n4iqtjax4j3-5>li{counter-increment:lst-ctn-kix_3n4iqtjax4j3-5}.lst-kix_tp6zooze0zhc-7>li:before{content:"" counter(lst-ctn-kix_tp6zooze0zhc-7,lower-latin) ". "}.lst-kix_tp6zooze0zhc-8>li:before{content:"" counter(lst-ctn-kix_tp6zooze0zhc-8,lower-roman) ". "}.lst-kix_tp6zooze0zhc-5>li:before{content:"" counter(lst-ctn-kix_tp6zooze0zhc-5,lower-roman) ". "}.lst-kix_tp6zooze0zhc-6>li:before{content:"" counter(lst-ctn-kix_tp6zooze0zhc-6,decimal) ". "}.lst-kix_tp6zooze0zhc-1>li{counter-increment:lst-ctn-kix_tp6zooze0zhc-1}.lst-kix_tp6zooze0zhc-4>li{counter-increment:lst-ctn-kix_tp6zooze0zhc-4}ol.lst-kix_tp6zooze0zhc-3.start{counter-reset:lst-ctn-kix_tp6zooze0zhc-3 0}ol.lst-kix_tp6zooze0zhc-0.start{counter-reset:lst-ctn-kix_tp6zooze0zhc-0 0}.lst-kix_tp6zooze0zhc-7>li{counter-increment:lst-ctn-kix_tp6zooze0zhc-7}.lst-kix_3n4iqtjax4j3-2>li:before{content:"" counter(lst-ctn-kix_3n4iqtjax4j3-2,lower-roman) ". "}.lst-kix_3n4iqtjax4j3-3>li:before{content:"" counter(lst-ctn-kix_3n4iqtjax4j3-3,decimal) ". "}ol.lst-kix_3n4iqtjax4j3-0.start{counter-reset:lst-ctn-kix_3n4iqtjax4j3-0 0}.lst-kix_tp6zooze0zhc-0>li{counter-increment:lst-ctn-kix_tp6zooze0zhc-0}.lst-kix_tp6zooze0zhc-6>li{counter-increment:lst-ctn-kix_tp6zooze0zhc-6}.lst-kix_3n4iqtjax4j3-0>li:before{content:"" counter(lst-ctn-kix_3n4iqtjax4j3-0,decimal) ". "}.lst-kix_3n4iqtjax4j3-4>li:before{content:"" counter(lst-ctn-kix_3n4iqtjax4j3-4,lower-latin) ". "}.lst-kix_3n4iqtjax4j3-3>li{counter-increment:lst-ctn-kix_3n4iqtjax4j3-3}ol.lst-kix_tp6zooze0zhc-5.start{counter-reset:lst-ctn-kix_tp6zooze0zhc-5 0}.lst-kix_3n4iqtjax4j3-6>li:before{content:"" counter(lst-ctn-kix_3n4iqtjax4j3-6,decimal) ". "}.lst-kix_3n4iqtjax4j3-7>li:before{content:"" counter(lst-ctn-kix_3n4iqtjax4j3-7,lower-latin) ". "}ol.lst-kix_3n4iqtjax4j3-7.start{counter-reset:lst-ctn-kix_3n4iqtjax4j3-7 0}.lst-kix_3n4iqtjax4j3-5>li:before{content:"" counter(lst-ctn-kix_3n4iqtjax4j3-5,lower-roman) ". "}ol.lst-kix_3n4iqtjax4j3-3.start{counter-reset:lst-ctn-kix_3n4iqtjax4j3-3 0}ol.lst-kix_tp6zooze0zhc-1.start{counter-reset:lst-ctn-kix_tp6zooze0zhc-1 0}.lst-kix_3n4iqtjax4j3-8>li:before{content:"" counter(lst-ctn-kix_3n4iqtjax4j3-8,lower-roman) ". "}.lst-kix_tp6zooze0zhc-5>li{counter-increment:lst-ctn-kix_tp6zooze0zhc-5}ol.lst-kix_3n4iqtjax4j3-4.start{counter-reset:lst-ctn-kix_3n4iqtjax4j3-4 0}ol.lst-kix_3n4iqtjax4j3-8{list-style-type:none}ol.lst-kix_tp6zooze0zhc-2.start{counter-reset:lst-ctn-kix_tp6zooze0zhc-2 0}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_3n4iqtjax4j3-4>li{counter-increment:lst-ctn-kix_3n4iqtjax4j3-4}ol.lst-kix_3n4iqtjax4j3-2.start{counter-reset:lst-ctn-kix_3n4iqtjax4j3-2 0}ol.lst-kix_3n4iqtjax4j3-8.start{counter-reset:lst-ctn-kix_3n4iqtjax4j3-8 0}.lst-kix_3n4iqtjax4j3-7>li{counter-increment:lst-ctn-kix_3n4iqtjax4j3-7}ol.lst-kix_3n4iqtjax4j3-6{list-style-type:none}ol.lst-kix_3n4iqtjax4j3-7{list-style-type:none}ol.lst-kix_3n4iqtjax4j3-4{list-style-type:none}ol.lst-kix_3n4iqtjax4j3-5{list-style-type:none}ol.lst-kix_3n4iqtjax4j3-2{list-style-type:none}ol.lst-kix_3n4iqtjax4j3-5.start{counter-reset:lst-ctn-kix_3n4iqtjax4j3-5 0}.lst-kix_3n4iqtjax4j3-1>li:before{content:"" counter(lst-ctn-kix_3n4iqtjax4j3-1,lower-latin) ". "}ol.lst-kix_3n4iqtjax4j3-3{list-style-type:none}ol.lst-kix_tp6zooze0zhc-8.start{counter-reset:lst-ctn-kix_tp6zooze0zhc-8 0}ol.lst-kix_3n4iqtjax4j3-0{list-style-type:none}.lst-kix_3n4iqtjax4j3-1>li{counter-increment:lst-ctn-kix_3n4iqtjax4j3-1}ol.lst-kix_3n4iqtjax4j3-1{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c7{background-color:#ffffff;color:#212529;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11.5pt;font-family:"Arial";font-style:normal}.c11{background-color:#ffffff;color:#212529;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11.5pt;font-family:"Consolas";font-style:normal}.c12{background-color:#ffffff;color:#212529;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Consolas";font-style:normal}.c9{background-color:#ffffff;padding-top:0pt;padding-bottom:4pt;line-height:1.2;orphans:2;widows:2;text-align:left}.c10{color:#212529;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Arial";font-style:normal}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c19{background-color:#ffffff;font-size:11.5pt;font-family:"Consolas";color:#212529;font-weight:400}.c4{color:#0000ff;text-decoration:none;vertical-align:baseline;font-style:normal}.c0{background-color:#ffffff;font-size:10pt;font-family:"Consolas";font-weight:400}.c17{background-color:#ffffff;font-weight:700;font-size:10pt;font-family:"Consolas"}.c3{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c15{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c16{margin-left:36pt;padding-left:0pt}.c14{padding:0;margin:0}.c18{margin-left:36pt}.c5{height:11pt}.c8{color:#0000ff}.c13{margin-left:72pt}.c6{color:#a31515}.c20{color:#008000}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c15 doc-content"><ol class="c14 lst-kix_tp6zooze0zhc-0 start" start="1"><li class="c1 c16 li-bullet-0"><span class="c2">Aplikacja zawiera gotowy interfejs kalkulatora do liczb ca&#322;kowitych. Korzystaj&#261;c z modelu MVVM uzupe&#322;nij aplikacj&#281; o szereg polece&#324; (Commands), tak by kalkulator faktycznie dzia&#322;a&#322;.</span></li><li class="c1 c16 li-bullet-0"><span class="c2">Aplikacja powinna zawiera&#263; ViewModel. Powinna korzysta&#263; z Commands oraz parametr&oacute;w do Commands.</span></li><li class="c1 c16 li-bullet-0"><span class="c2">Wciskanie kolejnych cyfr oraz polece&#324; powinno budowa&#263; zapis ca&#322;o&#347;ci dzia&#322;a&#324;, na przyk&#322;ad wciskaj&#261;c przycisk 1, nast&#281;pnie przycisk +, nast&#281;pnie przycisk 7, nast&#281;pnie przycisk dzielenia &ldquo;/&rdquo; a na ko&#324;cu przycisk 5, w na ekranie aplikacji powinni&#347;my uzyska&#263; ci&#261;g:</span></li></ol><p class="c1 c18"><span class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1+7/5</span></p><ol class="c14 lst-kix_tp6zooze0zhc-0" start="4"><li class="c1 c16 li-bullet-0"><span class="c2">Wci&#347;ni&#281;cie przycisku &ldquo;=&rdquo; powinno wyzwoli&#263; polecenie, kt&oacute;re obliczy wynik. Do wykonania oblicze&#324; mo&#380;esz skorzysta&#263; na przyk&#322;ad z metody &ldquo;Compute&rdquo; obiektu DataTable:</span></li></ol><p class="c1 c13"><span class="c2">DataTable dt = new DataTable();</span></p><p class="c1 c13"><span class="c2">var result = dt.Compute(moj_string_z_ciagiem_polecen, &quot;&quot;);</span></p><ol class="c14 lst-kix_tp6zooze0zhc-0" start="5"><li class="c1 c16 li-bullet-0"><span class="c2">Zabezpiecz aplikacj&#281; tak, by nie mo&#380;na by&#322;o wprowadzi&#263; na ekran dw&oacute;ch operator&oacute;w dzia&#322;a&#324; pod rz&#261;d, np: 1+*0</span></li><li class="c1 c16 li-bullet-0"><span class="c2">Wci&#347;ni&#281;cie przycisku &ldquo;C&rdquo; powinno czy&#347;ci&#263; ekran</span></li></ol><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><h3 class="c9" id="h.hjthsed9f9t8"><span class="c12">Tworzenie nowego projektu</span></h3><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c11">Na pocz&#261;tek do naszej wcze&#347;niej utworzonej solucji dodamy nowy projekt. Podobnie jak to robili&#347;my wcze&#347;niej, kliknij prawym przyciskiem myszy na nazw&#281; solucji, nast&#281;pnie Add i New Project.</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 1.00px solid #dee2e6; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 704.00px;"><img alt="PIERWSZA APLIKACJA Desktopowa WPF XAML - nowy projekt" src="images/image10.jpg" style="width: 624.00px; height: 704.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c11">Wybieramy WPF Application i koniecznie wybierz j&#281;zyk C#</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 1.00px solid #dee2e6; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 413.33px;"><img alt="PIERWSZA APLIKACJA Desktopowa WPF XAML - typ projektu" src="images/image11.jpg" style="width: 624.00px; height: 413.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c19">Kliknij przycisk Next. Wpisz odpowiedni&#261; nazw&#281; dla naszego projektu. Zgodnie z nasz&#261; wcze&#347;niej ustalon&#261; konwencj&#261; mo&#380;e to by&#263;: &bdquo;Calculator.ZSKApp&rdquo;.</span></p><p class="c1"><span class="c19">Kliknij Next. Wybierz odpowiedni framework, w naszym przypadku b&#281;dzie to .NET 7.0.</span><span class="c0">&nbsp;</span><span class="c11">Przycisk Create i projekt zostanie dodany do naszej solucji.</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1 c5"><span class="c0 c3"></span></p><h3 class="c9" id="h.arwdyy3gt145"><span class="c12">Przygotowanie folder&oacute;w pod MVVM</span></h3><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c11">Mo&#380;emy na pocz&#261;tek zrobi&#263; 1 zmian&#281;, poniewa&#380; tutaj b&#281;dziemy stosowa&#263; wzorzec MVVM, czyli Model View ViewModel. Dlatego dodamy na pocz&#261;tek odpowiednie foldery, &#380;eby na poziomie solucji ju&#380; oddzieli&#263; te wszystkie warstwy.</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c11">Dodaj prosz&#281; najpierw folder Views i folder ViewModels. Do folderu Views przenios&#281; od razu ca&#322;y plik MainWindow.xaml, czyli widok g&#322;&oacute;wny.</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 426.50px; height: 368.40px;"><img alt="" src="images/image3.png" style="width: 426.50px; height: 368.40px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c11">Opr&oacute;cz tego jeszcze w pliku App.xaml trzeba uwzgl&#281;dni&#263; te zmiany, to znaczy fakt, &#380;e MainWindows.xaml znajduje si&#281; w folderze Views.</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0 c3">&lt;Application x:Class=&quot;Calculator.ZSKApp.App&quot;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;xmlns:local=&quot;clr-namespace:Calculator.ZSKApp&quot;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;StartupUri=&quot;Views/MainWindow.xaml&quot;&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &lt;Application.Resources&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &lt;/Application.Resources&gt;</span></p><p class="c1"><span class="c0 c3">&lt;/Application&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1 c5"><span class="c0 c3"></span></p><h3 class="c9" id="h.aim7cip84rmi"><span class="c12">Tworzenie widoku w XAML</span></h3><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c19">Widok g&#322;&oacute;wny naszej aplikacji b&#281;dziemy tworzy&#263; w&#322;a&#347;nie w MainWindow.xaml. </span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 388.00px;"><img alt="" src="images/image7.png" style="width: 624.00px; height: 388.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c11">Na pocz&#261;tek w XAML mo&#380;emy sobie zmieni&#263; tytu&#322; naszej formatki na &quot;Kalkulator&quot;:</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Window x:Class=</span><span class="c0 c6">&quot;Calculator.WpfApp.MainWindow&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; xmlns=</span><span class="c0 c6">&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; xmlns:x=</span><span class="c0 c6">&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; xmlns:d=</span><span class="c0 c6">&quot;http://schemas.microsoft.com/expression/blend/2008&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; xmlns:mc=</span><span class="c0 c6">&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; xmlns:local=</span><span class="c0 c6">&quot;clr-namespace:Calculator.WpfApp&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; mc:Ignorable=</span><span class="c0 c6">&quot;d&quot;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; Title=</span><span class="c0 c6">&quot;Kalkulator&quot;</span><span class="c0">&nbsp;Height=</span><span class="c0 c6">&quot;450&quot;</span><span class="c0">&nbsp;Width=</span><span class="c0 c6">&quot;800&quot;</span><span class="c0 c3">&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &lt;Grid&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &lt;/Grid&gt;</span></p><p class="c1"><span class="c0 c3">&lt;/Window&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c11">Tak&#380;e mamy tutaj ju&#380; utworzonego Grida, skopiuj poni&#380;sze jego definicj&#281;:</span></p><p class="c1 c5"><span class="c11"></span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &lt;Grid&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Grid.ColumnDefinitions&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ColumnDefinition /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ColumnDefinition /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ColumnDefinition /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ColumnDefinition /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;ColumnDefinition /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/Grid.ColumnDefinitions&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Grid.RowDefinitions&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;RowDefinition /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;RowDefinition /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;RowDefinition /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;RowDefinition /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;RowDefinition /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;/Grid.RowDefinitions&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;TextBox Grid.Row=&quot;0&quot; Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;5&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;0&quot; Content=&quot;7&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;1&quot; Content=&quot;8&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;2&quot; Content=&quot;9&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;2&quot; Grid.Column=&quot;0&quot; Content=&quot;4&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;2&quot; Grid.Column=&quot;1&quot; Content=&quot;5&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;2&quot; Grid.Column=&quot;2&quot; Content=&quot;6&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;3&quot; Grid.Column=&quot;0&quot; Content=&quot;1&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;3&quot; Grid.Column=&quot;1&quot; Content=&quot;2&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;3&quot; Grid.Column=&quot;2&quot; Content=&quot;3&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;4&quot; Grid.Column=&quot;0&quot; Content=&quot;0&quot; Grid.ColumnSpan=&quot;2&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;4&quot; Grid.Column=&quot;2&quot; Content=&quot;,&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;3&quot; Content=&quot;/&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;2&quot; Grid.Column=&quot;3&quot; Content=&quot;-&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;3&quot; Grid.Column=&quot;3&quot; Content=&quot;*&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;4&quot; Grid.Column=&quot;3&quot; Content=&quot;C&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;1&quot; Grid.Column=&quot;4&quot; Content=&quot;+&quot; Grid.RowSpan=&quot;2&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; &lt;Button Grid.Row=&quot;3&quot; Grid.Column=&quot;4&quot; Content=&quot;=&quot; Grid.RowSpan=&quot;2&quot; /&gt;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &lt;/Grid&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c11">Tak&#380;e tak wygl&#261;da nasz widok g&#322;&oacute;wny, mo&#380;emy teraz uruchomi&#263; aplikacj&#281; i zobaczy&#263; jak to faktycznie b&#281;dzie wygl&#261;da&#322;o.</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 1.00px solid #dee2e6; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 352.00px;"><img alt="PIERWSZA APLIKACJA Desktopowa WPF XAML - kontrolki przed zmiana stylu" src="images/image4.jpg" style="width: 624.00px; height: 352.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c0 c3"></span></p><h3 class="c9" id="h.as43ocopw8ed"><span class="c10">ViewModel</span></h3><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Logika naszego kalkulatora b&#281;dzie w ViewModelu, dlatego dodajmy najpierw now&#261; klas&#281; we wcze&#347;niej utworzonym folderze ViewModels, w kt&oacute;rym b&#281;dzie ten ViewModel. Ta klasa mo&#380;e mie&#263; dowoln&#261; nazw&#281;, niech to b&#281;dzie MainViewModel. Nasz ka&#380;dy ViewModel powinien implementowa&#263; interfejs INotifyPropertyChanged.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4 c0">using System;</span></p><p class="c1"><span class="c4 c0">using System.Collections.Generic;</span></p><p class="c1"><span class="c4 c0">using System.ComponentModel;</span></p><p class="c1"><span class="c4 c0">using System.Linq;</span></p><p class="c1"><span class="c4 c0">using System.Text;</span></p><p class="c1"><span class="c4 c0">using System.Threading.Tasks;</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1"><span class="c4 c0">namespace Calculator.ZSKApp.ViewModels</span></p><p class="c1"><span class="c4 c0">{</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; internal class MainViewModel : INotifyPropertyChanged</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; {</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; public event PropertyChangedEventHandler? PropertyChanged;</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c4 c0">}</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Nie zapomnij na g&oacute;rze doda&#263; odpowiedniego using&#39;a, to znaczy System.ComponentModel. Doda&#322;em tak&#380;e deklaracje zdarzenia PropertyChanged, kt&oacute;re powinno by&#263; wywo&#322;any wtedy, gdy zmieni si&#281; jaka&#347; w&#322;a&#347;ciwo&#347;&#263;. Najlepiej od razu doda&#263; sobie tak&#261; dodatkow&#261; metod&#281; (najcz&#281;&#347;ciej o nazwie OnPropertyChanged), w kt&oacute;rej b&#281;dziemy wywo&#322;ywa&#263; to zdarzenie, zaoszcz&#281;dzi nam to troch&#281; czasu, bo b&#281;dzie ona wywo&#322;ywana w wielu miejscach. Najcz&#281;&#347;ciej b&#281;dziemy t&#281; metody wywo&#322;ywa&#263; we w&#322;a&#347;ciwo&#347;ciach, a konkretnie w set&#39;ach, w celu zaktualizowania widoku.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">using</span><span class="c0 c3">&nbsp;System.ComponentModel;</span></p><p class="c1"><span class="c0 c8">using</span><span class="c0 c3">&nbsp;System.Runtime.CompilerServices;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0 c8">namespace</span><span class="c0">&nbsp;</span><span class="c0 c6">Calculator.WpfApp.ViewModels</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">public</span><span class="c0">&nbsp;</span><span class="c0 c8">class</span><span class="c0">&nbsp;</span><span class="c0 c6">MainViewModel</span><span class="c0">&nbsp;: </span><span class="c0 c6">INotifyPropertyChanged</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">public</span><span class="c0">&nbsp;</span><span class="c0 c8">event</span><span class="c0 c3">&nbsp;PropertyChangedEventHandler PropertyChanged;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">OnPropertyChanged</span><span class="c0">([CallerMemberName] </span><span class="c0 c8">string</span><span class="c0">&nbsp;propertyName = </span><span class="c0 c6">null</span><span class="c0 c3">)</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; PropertyChanged?.Invoke(</span><span class="c0 c8">this</span><span class="c0">, </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;PropertyChangedEventArgs(propertyName));</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Do metody OnPropertyChanged przekazujemy tylko nazw&#281; w&#322;a&#347;ciwo&#347;ci (propertyName), kt&oacute;ra powinna zosta&#263; od&#347;wie&#380;ona, domy&#347;lnie jest to null. Dodatkowo ten parametr zosta&#322; oznaczony atrybutem CallerMemberName, dzi&#281;ki kt&oacute;remu domy&#347;lnie zostanie do tej metody przekazana nazwa w&#322;a&#347;ciwo&#347;ci, w kt&oacute;rej metoda zostanie wywo&#322;ana. Czyli je&#380;eli wywo&#322;amy metod&#281; w set w&#322;a&#347;ciwo&#347;ci o nazwie np. FirstName, bez przekazania parametru, to do metody i tak zostanie przekazany FirstName. Tak&#380;e b&#281;dzie troch&#281; mniej kodu do napisania.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Wewn&#261;trz metody za pomoc&#261; Invoke wyzwalamy event PropertyChanged, je&#380;eli nie jest null&#39;em. Tak mo&#380;e wygl&#261;da&#263; ta metoda i za chwil&#281; poka&#380;&#281; Ci, jak b&#281;dziemy jej u&#380;ywa&#263;. Dodamy za chwil&#281; kilka w&#322;a&#347;ciwo&#347;ci, gdzie wykorzystamy metod&#281; OnPropertyChanged.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><h3 class="c9" id="h.m05ef2dm25wl"><span class="c10">Powi&#261;zanie widoku z ViewModelem</span></h3><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Na pocz&#261;tek jednak, &#380;eby&#347;my nie zapomnieli, musimy powi&#261;za&#263; ten ViewModel z widokiem. Tak naprawd&#281;, mo&#380;emy to zrobi&#263; na kilka sposob&oacute;w. Mo&#380;emy to zrobi&#263; w widoku w XAMLu, gdzie wystarczy ustawi&#263; DataContext, ale my&#347;l&#281;, &#380;e &#322;atwiejszym i szybszym sposobem jest po prostu wpisanie 1 linjki kodu w CodeBehind, czyli w pliku MainWindow.xaml.cs</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">DataContext = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;MainViewModel();</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Tak b&#281;dzie wygl&#261;da&#322;a ca&#322;a klasa MainWindows.xaml.cs:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4 c0">using Calculator.ZSKApp.ViewModels;</span></p><p class="c1"><span class="c4 c0">using System;</span></p><p class="c1"><span class="c4 c0">using System.Collections.Generic;</span></p><p class="c1"><span class="c4 c0">using System.Linq;</span></p><p class="c1"><span class="c4 c0">using System.Text;</span></p><p class="c1"><span class="c4 c0">using System.Threading.Tasks;</span></p><p class="c1"><span class="c4 c0">using System.Windows;</span></p><p class="c1"><span class="c4 c0">using System.Windows.Controls;</span></p><p class="c1"><span class="c4 c0">using System.Windows.Data;</span></p><p class="c1"><span class="c4 c0">using System.Windows.Documents;</span></p><p class="c1"><span class="c4 c0">using System.Windows.Input;</span></p><p class="c1"><span class="c4 c0">using System.Windows.Media;</span></p><p class="c1"><span class="c4 c0">using System.Windows.Media.Imaging;</span></p><p class="c1"><span class="c4 c0">using System.Windows.Navigation;</span></p><p class="c1"><span class="c4 c0">using System.Windows.Shapes;</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1"><span class="c4 c0">namespace Calculator.ZSKApp</span></p><p class="c1"><span class="c4 c0">{</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; /// &lt;summary&gt;</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; /// Interaction logic for MainWindow.xaml</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; /// &lt;/summary&gt;</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; public partial class MainWindow : Window</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; {</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; public MainWindow()</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; InitializeComponent();</span></p><p class="c1"><span class="c0 c8">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c4 c17">DataContext = new MainViewModel();</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c4 c0">}</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Takim zapisem wskazujemy, &#380;e dla tego okna MainWindow &ndash; ViewModelem jest klasa MainViewModel.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><h3 class="c9" id="h.hxc6ci5kf9bs"><span class="c10">RelayCommand</span></h3><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Aby m&oacute;c powi&#261;za&#263; r&oacute;wnie&#380; zdarzenia z widok&oacute;w z metodami z ViewModelu potrzebujemy jeszcze jednej pomocniczej klasy. Dodajmy sobie najpierw nowy folder Commands, a w nim dodamy klas&#281; RelayCommand. Ta nazwa jest oczywi&#347;cie dowolna. Wa&#380;ne, &#380;eby implementowana ona interfejs ICommand.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c4 c0">using System;</span></p><p class="c1"><span class="c4 c0">using System.Collections.Generic;</span></p><p class="c1"><span class="c4 c0">using System.Linq;</span></p><p class="c1"><span class="c4 c0">using System.Text;</span></p><p class="c1"><span class="c4 c0">using System.Threading.Tasks;</span></p><p class="c1"><span class="c4 c0">using System.Windows.Input;</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1"><span class="c4 c0">namespace Calculator.ZSKApp.Commands</span></p><p class="c1"><span class="c4 c0">{</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; public class RelayCommand : ICommand</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; {</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; readonly Action&lt;object&gt; _execute;</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; readonly Predicate&lt;object&gt; _canExecute;</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; public RelayCommand(Action&lt;object&gt; execute)</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : this(execute, null)</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; public RelayCommand(Action&lt;object&gt; execute, Predicate&lt;object&gt; canExecute)</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _execute = execute ?? throw new ArgumentNullException(&quot;execute&quot;);</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _canExecute = canExecute;</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; public bool CanExecute(object parameter)</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return _canExecute == null || _canExecute(parameter);</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; public event EventHandler CanExecuteChanged</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; add</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c1"><span class="c0 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CommandManager.RequerySuggested += value;</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; remove</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CommandManager.RequerySuggested -= value;</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; public void Execute(object parameter)</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; {</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _execute(parameter);</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c1"><span class="c4 c0">&nbsp; &nbsp; }</span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1 c5"><span class="c4 c0"></span></p><p class="c1"><span class="c4 c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Czyli mamy dwa delegaty. 1 to jest Action, kt&oacute;ry b&#281;dzie przyjmowa&#322; parametr object, a drugi Predicate, kt&oacute;ry r&oacute;wnie&#380; mo&#380;e przyjmowa&#263; parametr object i zwraca boola.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">readonly</span><span class="c0">&nbsp;Action&lt;</span><span class="c0 c8">object</span><span class="c0 c3">&gt; _execute;</span></p><p class="c1"><span class="c0 c8">readonly</span><span class="c0">&nbsp;Predicate&lt;</span><span class="c0 c8">object</span><span class="c0 c3">&gt; _canExecute;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Poni&#380;ej mamy dwa konstruktory. Je&#380;eli b&#281;dziemy tworzy&#263; nowy obiekt tej klasy, to jako parametr konstruktora mo&#380;emy przekaza&#263; dwie metody. Jedna metoda, kt&oacute;ra ma si&#281; wykona&#263; po wyzwoleniu jakiego&#347; zdarzenia, a druga m&oacute;wi nam o tym, czy ta metoda mo&#380;e si&#281; wykona&#263;.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;</span><span class="c0 c6">RelayCommand</span><span class="c0">(Action&lt;</span><span class="c0 c8">object</span><span class="c0">&gt; execute, Predicate&lt;</span><span class="c0 c8">object</span><span class="c0 c3">&gt; canExecute)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; _execute = execute ?? </span><span class="c0 c8">throw</span><span class="c0">&nbsp;</span><span class="c0 c8">new</span><span class="c0">&nbsp;ArgumentNullException(</span><span class="c0 c6">&quot;execute&quot;</span><span class="c0 c3">);</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; _canExecute = canExecute;</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Czyli je&#380;eli przeka&#380;emy jak&#261;&#347; metod&#281;, kt&oacute;ra zwraca false, to ta akcja si&#281; nie wykona.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Mo&#380;esz te&#380; utworzy&#263; nowy obiekt, tylko przekazuj&#261;c metod&#281;, kt&oacute;ra ma zosta&#263; powi&#261;zana z t&#261; konkretn&#261; akcj&#261; i wtedy jako drugi parametr zostanie przekazany null.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;</span><span class="c0 c6">RelayCommand</span><span class="c0">(Action&lt;</span><span class="c0 c8">object</span><span class="c0 c3">&gt; execute)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; : </span><span class="c0 c6">this</span><span class="c0">(execute, </span><span class="c0 c6">null</span><span class="c0 c3">)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Poni&#380;ej mamy metod&#281; CanExecute, kt&oacute;ra je&#380;eli CanExecute b&#281;dzie null&#39;em lub b&#281;dzie zwraca&#322;a true, to wtedy ca&#322;a metoda CanExecute zwraca true. Dalej mamy jeszcze metod&#281; Execute, kt&oacute;ra po prostu wywo&#322;uje przekazan&#261; wcze&#347;niej metod&#281;. Tak&#380;e, tak mo&#380;e wygl&#261;da&#263; przyk&#322;adowa implementacja klasy RelayCommand. Poka&#380;&#281; Ci teraz, jak wygl&#261;da w&#322;a&#347;nie to wi&#261;zanie metod i w&#322;a&#347;ciwo&#347;ci.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><h3 class="c9" id="h.25twjdu4531o"><span class="c10">Binding w&#322;a&#347;ciwo&#347;ci</span></h3><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Przejd&#378; prosz&#281; do widoku g&#322;&oacute;wnego, czyli MainWindow.xaml. Mamy tutaj na g&oacute;rze zwyk&#322;ego TextBox&#39;a. W TextBox&#39;ie mo&#380;emy wy&#347;wietli&#263;, czy te&#380; wpisa&#263; dowolny tekst. Mo&#380;emy to zrobi&#263; na r&oacute;&#380;ne sposoby, to znaczy po pierwsze mo&#380;emy np. uzupe&#322;ni&#263; w&#322;a&#347;ciwo&#347;&#263; Text.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">&lt;TextBox Grid.Row=</span><span class="c0 c6">&quot;0&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;0&quot;</span><span class="c0">&nbsp;Grid.ColumnSpan=</span><span class="c0 c6">&quot;5&quot;</span><span class="c0">&nbsp;Text=</span><span class="c0 c6">&quot;123&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">To jest najprostszy spos&oacute;b, ale te&#380; najrzadziej wykorzystywany, poniewa&#380; mamy tutaj przypisany tekst na sta&#322;e. Mo&#380;e to by&#263; przydane tylko w niekt&oacute;rych przypadkach. Zazwyczaj jednak ten tekst chcemy zmienia&#263; podczas dzia&#322;ania programu. Troch&#281; lepszy rozwi&#261;zaniem b&#281;dzie nadanie nazwy tej kontrolce i p&oacute;&#378;niej odnoszenie si&#281; do niej w CodeBehind. Czyli wtedy tak by to wygl&#261;da&#322;o:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">&lt;TextBox Grid.Row=</span><span class="c0 c6">&quot;0&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;0&quot;</span><span class="c0">&nbsp;Grid.ColumnSpan=</span><span class="c0 c6">&quot;5&quot;</span><span class="c0">&nbsp;Name=</span><span class="c0 c6">&quot;tbScreen&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">A w CodeBehind:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">tbScreen.Text = </span><span class="c0 c6">&quot;123&quot;</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">To wszystko jak najbardziej zadzia&#322;a. Tylko my chcemy, aby nasza aplikacja korzysta&#322;a ze wzorca MVVM i nie chcemy tutaj za bardzo wpisywa&#263; &#380;adnego kodu w CodeBehind. Ca&#322;&#261; logik&#281; chcemy mie&#263; w naszym ViewModelu. Tak&#380;e, aby to zrobi&#263; prawid&#322;owo, musimy powi&#261;za&#263; te dane z odpowiednimi w&#322;a&#347;ciwo&#347;ciami z MainViewModel. Wygl&#261;da to tak, w widoku wi&#261;&#380;emy te dane za pomoc&#261; Binding:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">&lt;TextBox Grid.Row=</span><span class="c0 c6">&quot;0&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;0&quot;</span><span class="c0">&nbsp;Grid.ColumnSpan=</span><span class="c0 c6">&quot;5&quot;</span><span class="c0">&nbsp;Text=</span><span class="c0 c6">&quot;{Binding ScreenVal}&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Czyli m&oacute;wimy tutaj, &#380;e chcemy powi&#261;za&#263; w&#322;a&#347;ciwo&#347;&#263; Text tej konkretnej kontrolki TextBox z w&#322;a&#347;ciwo&#347;ci&#261; o nazwie ScreenVal, kt&oacute;r&#261; zaraz utworzymy w naszym ViewModelu, kt&oacute;ry z kolei powi&#261;zany jest z tym widokiem.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Tworzymy w MainViewModel wraz z polem tak&#261; w&#322;a&#347;ciwo&#347;&#263;:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">string</span><span class="c0 c3">&nbsp;_screenVal;</span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;</span><span class="c0 c8">string</span><span class="c0 c3">&nbsp;ScreenVal</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">get</span><span class="c0">&nbsp;{ </span><span class="c0 c8">return</span><span class="c0 c3">&nbsp;_screenVal; }</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">set</span><span class="c0 c3">&nbsp;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; { </span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; _screenVal = </span><span class="c0 c8">value</span><span class="c0 c3">;</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; &nbsp; &nbsp; OnPropertyChanged();</span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Ta w&#322;a&#347;ciwo&#347;&#263; powinna by&#263; string&#39;iem (tak samo jako w&#322;a&#347;ciwo&#347;&#263; Text TextBox&#39;a). Tak jak Ci wspomina&#322;em wcze&#347;niej, w set jeszcze musimy wywo&#322;a&#263; nasz&#261; wcze&#347;niej stworzon&#261; metod&#281; OnPropertyChanged, tak &#380;eby po zmianie w ViewModelu od&#347;wie&#380;y&#322;y si&#281; dane w widoku. Bez wywo&#322;ania tej metody, widok nie zosta&#322;by zaktualizowany. Teraz, je&#380;eli zmienimy warto&#347;&#263; tej w&#322;a&#347;ciwo&#347;ci, mo&#380;emy to np. zrobi&#263; w konstruktorze, to widok zostanie zaktualizowany.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;</span><span class="c0 c6">MainViewModel</span><span class="c0 c3">()</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ScreenVal = </span><span class="c0 c6">&quot;0&quot;</span><span class="c0 c3">;</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Tak b&#281;dzie wygl&#261;da&#263; aplikacja po uruchomieniu:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 356.00px;"><img alt="" src="images/image2.png" style="width: 624.00px; height: 356.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Jak widzisz, widok zosta&#322; zaktualizowany. Wszystko dzia&#322;a, tak jak powinno. Czyli mamy w widoku TextBox, kt&oacute;rego w&#322;a&#347;ciwo&#347;&#263; Text jest powi&#261;zana z w&#322;a&#347;ciwo&#347;ci&#261; ScreenValue z ViewModelu. Nast&#281;pnie w ViewModelu mamy tak&#261; w&#322;a&#347;ciwo&#347;&#263; i teraz, je&#380;eli b&#281;dziemy zmienia&#263; warto&#347;&#263; tej w&#322;a&#347;ciwo&#347;ci, to automatycznie b&#281;dzie to wszystko wy&#347;wietlane na widoku. Dzi&#281;ki temu, &#380;e w set w&#322;a&#347;nie mamy OnPropertyChanged, czyli ten event PropertyChanged tutaj jest wyzwalany, to widok tak jakby &quot;widzi&quot;, &#380;e to si&#281; zmieni&#322;o w ViewModelu i ka&#380;da zmiana b&#281;dzie od razu wy&#347;wietlana na widoku. Tak wygl&#261;da wi&#261;zanie z w&#322;a&#347;ciwo&#347;ciami.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><h3 class="c9" id="h.ies4ygqoplas"><span class="c10">Binding metod</span></h3><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Opr&oacute;cz tego jeszcze chcemy oczywi&#347;cie powi&#261;za&#263; nasze zdarzenia z metodami. Do tego u&#380;yjemy komend (Command) i ponownie wi&#261;zania (Binding). Przejd&#378;my ponownie do widoku MainWindow i dodaj wi&#261;zanie do komendy na pocz&#261;tek dla przycisku 7, tak to mo&#380;e wygl&#261;da&#263;:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;7&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">M&oacute;wimy w tym miejscu, &#380;e chcemy powi&#261;za&#263; zdarzenie Click dla naszego przycisku z komend&#261; AddNumberCommand, kt&oacute;ra zostanie zaraz stworzona w ViewModelu. Je&#380;eli przycisk zostanie klikni&#281;ty, to zostanie wywo&#322;ana odpowiednia metoda.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Przejd&#378; ponownie do MainViewModel. Dodamy tutaj wymagan&#261; komend&#281;, kt&oacute;ra r&oacute;wnie&#380; b&#281;dzie w&#322;a&#347;ciwo&#347;ci&#261;:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;ICommand AddNumberCommand { </span><span class="c0 c8">get</span><span class="c0">; </span><span class="c0 c8">set</span><span class="c0 c3">; }</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Nast&#281;pnie musimy zainicjalizowa&#263; t&#261; komend&#281; w konstruktorze:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;</span><span class="c0 c6">MainViewModel</span><span class="c0 c3">()</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ScreenVal = </span><span class="c0 c6">&quot;0&quot;</span><span class="c0 c3">;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; AddNumberCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(AddNumber);</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Tutaj tworzymy instancje klasy RelayCommand, kt&oacute;r&#261; przed chwil&#261; stworzyli&#347;my. Zauwa&#380;, &#380;e jako parametr do konstruktora RelayCommand przekazali&#347;my metod&#281; o nazwie AddNumber, tak&#380;e potrzebujemy stworzy&#263; tak&#261; metod&#281;.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">AddNumber</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Czyli dok&#322;adnie ta metoda zostanie wywo&#322;ana, gdy zostanie klikni&#281;ty przycisk 7. Mo&#380;emy to sprawdzi&#263;. W tym celu mo&#380;esz wy&#347;wietli&#263; w metodzie AddNumber odpowiedni komunikat:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">AddNumber</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; MessageBox.Show(</span><span class="c0 c6">&quot;AddNumber Clicked&quot;</span><span class="c0 c3">);</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Sprawd&#378; teraz, czy taki komunikat u Ciebie si&#281; pojawia.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 356.00px;"><img alt="" src="images/image5.png" style="width: 624.00px; height: 356.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">U mnie wszystko na t&#281; chwil&#281; dzia&#322;a prawid&#322;owo. Za chwil&#281; tutaj stworzymy ju&#380; faktyczn&#261; logik&#281;.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Czyli jeszcze raz wyt&#322;umacz&#281; Ci jak dzia&#322;y ca&#322;y ten mechanizm. Mamy w widoku przycisk, na t&#281; chwil&#281; podpi&#281;li&#347;my si&#281; tylko pod przycisk z 7 i wi&#261;&#380;emy tutaj jego zdarzenie Click z komend&#261; AddNumberCommand, kt&oacute;ra jest w ViewModelu. Komenda o takiej nazwie musi by&#263; w&#322;a&#347;ciwo&#347;ci&#261; w ViewModelu. Nast&#281;pnie np. w konstruktorze inicjalizujemy t&#281; komend&#281; i m&oacute;wimy, &#380;e chcemy, &#380;eby po klikni&#281;ciu zosta&#322;a wywo&#322;ana metoda AddNumber, kt&oacute;ra wy&#347;wietli nam w tej chwili taki testowy komunikat.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><h3 class="c9" id="h.rp9dhyh7fhg1"><span class="c10">Przekazanie parametru do ViewModelu</span></h3><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">My&#347;l&#281;, &#380;e mo&#380;emy przej&#347;&#263; dalej. Tak&#380;e, tak samo b&#281;dziemy chcieli podpi&#261;&#263; t&#281; komend&#281; i metod&#281; pod inne przyciski, ale te&#380; w&#322;a&#347;nie musimy jako&#347; rozr&oacute;&#380;nia&#263;, &#380;eby&#347;my wiedzieli kt&oacute;ry przycisk zosta&#322; klikni&#281;ty. Tak&#380;e opr&oacute;cz tego, &#380;e mamy powi&#261;zane komend&#281;, to chcemy w widoku jeszcze przekaza&#263; parametr. W tym celu musimy do CommandParameter przypisa&#263;, to co chcemy przekaza&#263;, czyli w tym przypadku b&#281;dzie to 7.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;7&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;7&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Dzi&#281;ki temu do metody AddNumber jako parametr zostanie przekazana ta 7.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">AddNumber</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0">&nbsp;obj</span><span class="c0 c20">/*7*/</span><span class="c0 c3">)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; MessageBox.Show(</span><span class="c0 c6">&quot;AddNumber Clicked&quot;</span><span class="c0 c3">);</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Mo&#380;emy te&#380; to przetestowa&#263;. W metodzie jako parametr dostajemy object, tak&#380;e musimy go rzutowa&#263; na string&#39;a i spr&oacute;bujemy to wy&#347;wietli&#263; na ekranie.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">AddNumber</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; MessageBox.Show(obj </span><span class="c0 c8">as</span><span class="c0">&nbsp;</span><span class="c0 c8">string</span><span class="c0 c3">);</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><h3 class="c9" id="h.lg4cjqjt5mx5"><span class="c10">Pozosta&#322;e wi&#261;zanie danych</span></h3><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Pozostaje nam jeszcze powi&#261;zanie reszty przycisk&oacute;w, tak &#380;eby wsz&#281;dzie to tak dzia&#322;a&#322;o, czyli to samo b&#281;dzie dla 0, 1, 2, 3, 4, 5, 6, 7, 8 i 9, a tak&#380;e dla &quot;,&quot;.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;7&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;7&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;8&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;8&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;9&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;9&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;4&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;4&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;5&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;5&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;6&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;6&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;4&quot;</span><span class="c0">&nbsp;Grid.ColumnSpan=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;0&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;0&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;4&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;,&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddNumberCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;,&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">W ka&#380;dym przypadku do ViewModelu zostanie przekazany odpowiedni parametr i na tej podstawie rozr&oacute;&#380;nimy, kt&oacute;ry przycisk zosta&#322; klikni&#281;ty.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Troch&#281; inna logika b&#281;dzie dla naszych operacji, mo&#380;e sobie od razu powi&#261;za&#263; przyciski operacji z kolejn&#261; komend&#261; o nazwie AddOperationCommand.</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;/&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddOperationCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;/&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;-&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddOperationCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;-&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;*&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddOperationCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;*&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;1&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;4&quot;</span><span class="c0">&nbsp;Grid.RowSpan=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;+&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding AddOperationCommand}&quot;</span><span class="c0">&nbsp;CommandParameter=</span><span class="c0 c6">&quot;+&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Tak samo, jak wcze&#347;niej, r&oacute;wnie&#380; tutaj przeka&#380;emy odpowiedni parametr. Nast&#281;pnie w ViewModelu dodamy now&#261; w&#322;a&#347;ciwo&#347;&#263; i zainicjalizujemy j&#261; w konstruktorze.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;ICommand AddOperationCommand { </span><span class="c0 c8">get</span><span class="c0">; </span><span class="c0 c8">set</span><span class="c0 c3">; }</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;</span><span class="c0 c6">MainViewModel</span><span class="c0 c3">()</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ScreenVal = </span><span class="c0 c6">&quot;0&quot;</span><span class="c0 c3">;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; AddNumberCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(AddNumber);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; AddOperationCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(AddOperation);</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">W konstruktorze przeka&#380;emy metod&#281; AddOperation, kt&oacute;r&#261; zaraz stworzymy.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">AddOperation</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Potrzebujemy jeszcze osobn&#261; komend&#281; do przycisku Clear, tak&#380;e w widoku wpisujemy:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;4&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;C&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding ClearScreenCommand}&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Dodajemy tak&#261; w&#322;a&#347;ciwo&#347;&#263; w ViewModelu, inicjalizujemy w konstruktorze.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;ICommand ClearScreenCommand { </span><span class="c0 c8">get</span><span class="c0">; </span><span class="c0 c8">set</span><span class="c0 c3">; }</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;</span><span class="c0 c6">MainViewModel</span><span class="c0 c3">()</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ScreenVal = </span><span class="c0 c6">&quot;0&quot;</span><span class="c0 c3">;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; AddNumberCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(AddNumber);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; AddOperationCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(AddOperation);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ClearScreenCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(ClearScreen);</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Tworzymy metod&#281;, kt&oacute;ra ma zosta&#263; wywo&#322;ana.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">ClearScreen</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">I tak samo zrobimy dla przycisku, kt&oacute;ry b&#281;dzie wy&#347;wietla&#322; wynik, w tym przypadku powi&#261;&#380;emy przycisk z komend&#261; GetResultCommand.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">&lt;Button Grid.Row=</span><span class="c0 c6">&quot;3&quot;</span><span class="c0">&nbsp;Grid.Column=</span><span class="c0 c6">&quot;4&quot;</span><span class="c0">&nbsp;Grid.RowSpan=</span><span class="c0 c6">&quot;2&quot;</span><span class="c0">&nbsp;Content=</span><span class="c0 c6">&quot;=&quot;</span><span class="c0">&nbsp;Command=</span><span class="c0 c6">&quot;{Binding GetResultCommand}&quot;</span><span class="c0 c3">&nbsp;/&gt;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Nowa komenda w ViewModelu, inicjalizacja w konstruktorze i dodajemy now&#261; metod&#281; GetResult.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;ICommand GetResultCommand { </span><span class="c0 c8">get</span><span class="c0">; </span><span class="c0 c8">set</span><span class="c0 c3">; }</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">public</span><span class="c0">&nbsp;</span><span class="c0 c6">MainViewModel</span><span class="c0 c3">()</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ScreenVal = </span><span class="c0 c6">&quot;0&quot;</span><span class="c0 c3">;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; AddNumberCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(AddNumber);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; AddOperationCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(AddOperation);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ClearScreenCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(ClearScreen);</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; GetResultCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(GetResult);</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">GetResult</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><h3 class="c9" id="h.6honz9mh2jer"><span class="c10">Logika w ViewModelu</span></h3><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Mamy ju&#380; teraz powi&#261;zane wszystkie w&#322;a&#347;ciwo&#347;ci i wszystkie zdarzenia w naszym widoku, tak&#380;e teraz tylko musimy uzupe&#322;ni&#263; ich logik&#281; w ViewModelu i wtedy nasza aplikacja b&#281;dzie kompletna.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Zacznijmy od metody AddNumber. Najpierw interesuje nas to jaki zosta&#322; przekazany parametr do tej metody, tak&#380;e przypiszemy go do zmiennej number.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">var</span><span class="c0">&nbsp;number = obj </span><span class="c0 c8">as</span><span class="c0">&nbsp;</span><span class="c0 c8">string</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Nast&#281;pnie sprawdzimy najpierw, czy obecnie na tym naszym ekranie jest wy&#347;wietlane 0 i liczba, kt&oacute;ra zosta&#322;a przekazana, jest r&oacute;&#380;na od przecinka. Je&#380;eli tak, to ScreenVal ustawiamy na string empty. W przeciwnym przypadku musimy sprawdzi&#263;, czy zosta&#322; przekazany przecinek i wcze&#347;niej zosta&#322;a wybrana operacja, je&#380;eli tak, to musimy ten nasz przecinek przekaza&#263; razem z zerem.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">if</span><span class="c0">&nbsp;(ScreenVal == </span><span class="c0 c6">&quot;0&quot;</span><span class="c0">&nbsp;&amp;&amp; number != </span><span class="c0 c6">&quot;,&quot;</span><span class="c0 c3">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ScreenVal = </span><span class="c0 c8">string</span><span class="c0 c3">.Empty;</span></p><p class="c1"><span class="c0 c8">else</span><span class="c0">&nbsp;</span><span class="c0 c8">if</span><span class="c0">&nbsp;(number == </span><span class="c0 c6">&quot;,&quot;</span><span class="c0 c3">&nbsp;&amp;&amp; _availableOperations.Contains(ScreenVal.Substring(ScreenVal.Length - 1)))</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; number = </span><span class="c0 c6">&quot;0,&quot;</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">A tak wygl&#261;da lista operacji:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;List&lt;</span><span class="c0 c8">string</span><span class="c0">&gt; _availableOperations = </span><span class="c0 c8">new</span><span class="c0">&nbsp;List&lt;</span><span class="c0 c8">string</span><span class="c0">&gt; { </span><span class="c0 c6">&quot;+&quot;</span><span class="c0">, </span><span class="c0 c6">&quot;-&quot;</span><span class="c0">, </span><span class="c0 c6">&quot;/&quot;</span><span class="c0">, </span><span class="c0 c6">&quot;*&quot;</span><span class="c0 c3">&nbsp;};</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Tak&#380;e mamy nowe pole, jest to lista string&oacute;w z dost&#281;pnymi operacjami. Od razu zosta&#322;o zainicjalizowane, czyli mamy 4 dost&#281;pne operacj&#281;. S&#261; to: dodawanie, odejmowanie, dzielenie i mno&#380;enie. Zweryfikowali&#347;my tak&#380;e, czy ostatnim znakiem by&#322;a tutaj operacja. Je&#380;eli tak, to chcemy przekaza&#263; przed przecinkiem jeszcze 0, tak &#380;eby p&oacute;&#378;niej nie by&#322;o jakich&#347; dziwnych b&#322;&#281;d&oacute;w. Na koniec, to co zosta&#322;o wpisane, wy&#347;wietlamy na ekran. Doklejamy to do tych znak&oacute;w, kt&oacute;re by&#322;y ju&#380; tam wcze&#347;niej.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c3">ScreenVal += number;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Tak wygl&#261;da na t&#281; chwil&#281; ca&#322;a metoda:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">AddNumber</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">var</span><span class="c0">&nbsp;number = obj </span><span class="c0 c8">as</span><span class="c0">&nbsp;</span><span class="c0 c8">string</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">if</span><span class="c0">&nbsp;(ScreenVal == </span><span class="c0 c6">&quot;0&quot;</span><span class="c0">&nbsp;&amp;&amp; number != </span><span class="c0 c6">&quot;,&quot;</span><span class="c0 c3">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; ScreenVal = </span><span class="c0 c8">string</span><span class="c0 c3">.Empty;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">else</span><span class="c0">&nbsp;</span><span class="c0 c8">if</span><span class="c0">&nbsp;(number == </span><span class="c0 c6">&quot;,&quot;</span><span class="c0 c3">&nbsp;&amp;&amp; _availableOperations.Contains(ScreenVal.Substring(ScreenVal.Length - 1)))</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; number = </span><span class="c0 c6">&quot;0,&quot;</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; ScreenVal += number;</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Mo&#380;emy teraz zobaczy&#263; czy to dzia&#322;a.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 353.33px;"><img alt="" src="images/image8.png" style="width: 624.00px; height: 353.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Tak&#380;e tutaj ju&#380; si&#281; wszystko &#322;adnie wy&#347;wietla. Je&#380;eli wpiszemy cyfr&#281;, to wy&#347;wietla si&#281; prawid&#322;owo, je&#380;eli wpiszemy jako pierwszy znak przecinek, to r&oacute;wnie&#380; jest ok. Tak&#380;e mo&#380;emy ju&#380; dodawa&#263; cyfry i przecinek.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Potrzebujemy r&oacute;wnie&#380; doda&#263; operacj&#281;, czyli zaimplementowa&#263; metod&#281; AddOperation. Tak samo najpierw musimy sprawdzi&#263;, co tutaj w og&oacute;le zosta&#322;o przekazane, kt&oacute;ra dok&#322;adnie operacja zosta&#322;a klikni&#281;ta.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">var</span><span class="c0">&nbsp;operation = obj </span><span class="c0 c8">as</span><span class="c0">&nbsp;</span><span class="c0 c8">string</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Nast&#281;pnie wy&#347;wietlamy j&#261; na ekranie.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c3">ScreenVal += operation;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Tak b&#281;dzie wygl&#261;da&#263; metoda AddOperation:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">AddOperation</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">var</span><span class="c0">&nbsp;operation = obj </span><span class="c0 c8">as</span><span class="c0">&nbsp;</span><span class="c0 c8">string</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; ScreenVal += operation;</span></p><p class="c1"><span class="c0">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Wszystko jest ok. Nast&#281;pnie mo&#380;emy zaimplementowa&#263; metod&#281; ClearScreen. Tutaj wystarczy do w&#322;a&#347;ciwo&#347;ci ScreenVal przypisa&#263; 0. Tak mo&#380;e wygl&#261;da&#263; ta metoda:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">ClearScreen</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ScreenVal = </span><span class="c0 c6">&quot;0&quot;</span><span class="c0 c3">;</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Ok, pozostaje nam jeszcze wy&#347;wietlenie wyniku. Tym razem jednak ten wynik b&#281;dziemy wy&#347;wietla&#263; troch&#281; inaczej ni&#380; w poprzednich aplikacjach. Mo&#380;emy to zrobi&#263; troch&#281; &#322;atwiejszym sposobem. Jest taka klasa DataTable, kt&oacute;ra ma metod&#281; Compute, dzi&#281;ki kt&oacute;rej mo&#380;emy obliczy&#263; przekazany ci&#261;g znak&oacute;w, kt&oacute;ry jest string&#39;iem. Tak&#380;e stw&oacute;rzmy sobie najpierw nowe pole:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;DataTable _dataTable = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;DataTable();</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Trzeba doda&#263; odpowiedni using &ndash; System.Data. Teraz u&#380;yjemy ju&#380; metody Compute do naszych oblicze&#324;.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">var</span><span class="c0">&nbsp;result = _dataTable.Compute(ScreenVal, </span><span class="c0 c6">&quot;&quot;</span><span class="c0 c3">);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Przekazujemy warto&#347;&#263; w&#322;a&#347;ciwo&#347;ci ScreenVal i przekazujemy filtr, a mo&#380;e to by&#263; po prostu pusty string. Przypisujemy to, co zwr&oacute;ci ta metoda do nowej zmiennej result. Na koniec wy&#347;wietlamy ten wynik na ekranie:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c3">ScreenVal = result.ToString();</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Takie rozwi&#261;zanie jest ok, ale jeszcze nie dla wszystkich sytuacji. Musimy jeszcze zabezpieczy&#263; si&#281; przed b&#322;&#281;dami zwi&#261;zanymi z nieodpowiednim formatowaniem. To znaczy, przed przekazaniem warto&#347;ci do metody Compute musimy zast&#261;pi&#263; przecinek &ndash; kropk&#261;:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">var</span><span class="c0">&nbsp;result = _dataTable.Compute(ScreenVal.Replace(</span><span class="c0 c6">&quot;,&quot;</span><span class="c0">, </span><span class="c0 c6">&quot;.&quot;</span><span class="c0">), </span><span class="c0 c6">&quot;&quot;</span><span class="c0 c3">);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Mo&#380;emy sobie jeszcze wynik zaokr&#261;gli&#263; do 2 miejsc po przecinku. Wystarczy skorzysta&#263; z metody Round, statycznej klasy Math.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">var</span><span class="c0">&nbsp;result = Math.Round(Convert.ToDouble(_dataTable.Compute(ScreenVal.Replace(</span><span class="c0 c6">&quot;,&quot;</span><span class="c0">, </span><span class="c0 c6">&quot;.&quot;</span><span class="c0">), </span><span class="c0 c6">&quot;&quot;</span><span class="c0 c3">)), 2);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">I ca&#322;a metoda mo&#380;e wygl&#261;da&#263; w ten spos&oacute;b:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">GetResult</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">var</span><span class="c0">&nbsp;result = Math.Round(Convert.ToDouble(_dataTable.Compute(ScreenVal.Replace(</span><span class="c0 c6">&quot;,&quot;</span><span class="c0">, </span><span class="c0 c6">&quot;.&quot;</span><span class="c0">), </span><span class="c0 c6">&quot;&quot;</span><span class="c0 c3">)), 2);</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; ScreenVal = result.ToString();</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Teraz mo&#380;na przetestowa&#263; aplikacj&#281;, zobaczmy czy to dzia&#322;a. Konieczne jest sprawdzenie r&oacute;&#380;nych przypadk&oacute;w.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 352.00px;"><img alt="" src="images/image6.png" style="width: 624.00px; height: 352.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 353.33px;"><img alt="" src="images/image9.png" style="width: 624.00px; height: 353.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Standardowa &#347;cie&#380;ka dzia&#322;a prawid&#322;owo. Jednak trzeba pami&#281;ta&#263;, &#380;e u&#380;ytkownicy klikaj&#261; w najr&oacute;&#380;niejsze sposoby i trzeba zabezpieczy&#263; si&#281; przed wszystkimi przypadkami.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Zamiast wprowadzi&#263; liczb&#281; po wybraniu operacji, mo&#380;na wybra&#263; kolejne operacje i w takiej sytuacji nasza aplikacja nie zadzia&#322;a&#322;a prawid&#322;owo. Nie mo&#380;emy dopu&#347;ci&#263; do takiej sytuacji. Musimy si&#281; zabezpieczy&#263; przed tak&#261; sytuacj&#261;. Na szcz&#281;&#347;cie nie jest to trudne. Mo&#380;emy sobie doda&#263; nowe pole:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0 c3">&nbsp;_isLastSignAnOperation;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Kt&oacute;re, jak sama nazwa wskazuje, b&#281;dzie przechowywa&#322;a informacje o tym, czy ostatni znak jest operacj&#261;. Je&#380;eli b&#281;dzie operacj&#261;, to nie mo&#380;emy pozwoli&#263; na klikni&#281;cie ponownie na kolejn&#261; operacj&#281;, tylko w takiej sytuacji mo&#380;e zosta&#263; wybrana liczba. Musimy w kilku miejscach ustawi&#263; warto&#347;&#263; tego pola.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Po pierwsze, je&#380;eli klikniemy numer, to znaczy, &#380;e ostatnim znakiem nie jest operacja, tak&#380;e mo&#380;emy ustawi&#263; wtedy to pole na false.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">AddNumber</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">var</span><span class="c0">&nbsp;number = obj </span><span class="c0 c8">as</span><span class="c0">&nbsp;</span><span class="c0 c8">string</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">if</span><span class="c0">&nbsp;(ScreenVal == </span><span class="c0 c6">&quot;0&quot;</span><span class="c0">&nbsp;&amp;&amp; number != </span><span class="c0 c6">&quot;,&quot;</span><span class="c0 c3">)</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; ScreenVal = </span><span class="c0 c8">string</span><span class="c0 c3">.Empty;</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">else</span><span class="c0">&nbsp;</span><span class="c0 c8">if</span><span class="c0">&nbsp;(number == </span><span class="c0 c6">&quot;,&quot;</span><span class="c0 c3">&nbsp;&amp;&amp; _availableOperations.Contains(ScreenVal.Substring(ScreenVal.Length - 1)))</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; number = </span><span class="c0 c6">&quot;0,&quot;</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; ScreenVal += number;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; _isLastSignAnOperation = </span><span class="c0 c6">false</span><span class="c0 c3">;</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Je&#380;eli zostanie klikni&#281;ta operacja, to oczywi&#347;cie ustawiamy na true.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">AddOperation</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">var</span><span class="c0">&nbsp;operation = obj </span><span class="c0 c8">as</span><span class="c0">&nbsp;</span><span class="c0 c8">string</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0 c3">&nbsp; &nbsp; ScreenVal += operation;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; _isLastSignAnOperation = </span><span class="c0 c6">true</span><span class="c0 c3">;</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Je&#380;eli zostanie klikni&#281;ty przycisk Clear, to r&oacute;wnie&#380; ustawiamy na false.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">void</span><span class="c0">&nbsp;</span><span class="c0 c6">ClearScreen</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; ScreenVal = </span><span class="c0 c6">&quot;0&quot;</span><span class="c0 c3">;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0">&nbsp; &nbsp; _isLastSignAnOperation = </span><span class="c0 c6">false</span><span class="c0 c3">;</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Teraz na podstawie tego pola chcemy blokowa&#263; r&oacute;wnie&#380; niekt&oacute;re przyciski. Chcemy blokowa&#263; przycisk operacji, tak &#380;eby dwie operacje nie zosta&#322;y klikni&#281;te jedna po drugiej i te&#380; chcemy blokowa&#263; przycisk result, poniewa&#380; nie chcemy, &#380;eby w sytuacji, gdy ostatni znak jest operacja, to by&#322; obliczany wynik. Aby to zrobi&#263;, wystarczy w konstruktorze dla komend AddOperationCommand oraz GetResultCommand uzupe&#322;ni&#263; ten drugi parametr konstruktora RelayCommand, o kt&oacute;rym wcze&#347;niej Ci wspomina&#322;em, gdzie zdefiniujemy, kiedy chcemy, &#380;eby ta metoda by&#322;a dost&#281;pna.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0">AddOperationCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(AddOperation, CanAddOperation);</span></p><p class="c1"><span class="c0">GetResultCommand = </span><span class="c0 c8">new</span><span class="c0 c3">&nbsp;RelayCommand(GetResult, CanGetResult);</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Nast&#281;pnie dodamy implementacje tych metod:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;</span><span class="c0 c6">CanGetResult</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">return</span><span class="c0 c3">&nbsp;!_isLastSignAnOperation;</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;</span><span class="c0 c6">CanAddOperation</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj)</span></p><p class="c1"><span class="c0 c3">{</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; </span><span class="c0 c8">return</span><span class="c0 c3">&nbsp;!_isLastSignAnOperation;</span></p><p class="c1"><span class="c0 c3">}</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Chcemy, &#380;eby te metody mog&#322;y zosta&#263; wywo&#322;ane tylko wtedy gdy pole isLastSignAnOperation ma warto&#347;&#263; false. Mo&#380;emy sobie r&oacute;wnie&#380; skr&oacute;ci&#263; wersj&#281; tych metod i zapisa&#263; j&#261; w ten spos&oacute;b:</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;</span><span class="c0 c6">CanGetResult</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj) =&gt; !_isLastSignAnOperation;</span></p><p class="c1 c5"><span class="c0 c3"></span></p><p class="c1"><span class="c0 c8">private</span><span class="c0">&nbsp;</span><span class="c0 c8">bool</span><span class="c0">&nbsp;</span><span class="c0 c6">CanAddOperation</span><span class="c0">(</span><span class="c0 c8">object</span><span class="c0 c3">&nbsp;obj) =&gt; !_isLastSignAnOperation;</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Zobaczmy czy to dzia&#322;a.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 350.67px;"><img alt="" src="images/image1.png" style="width: 624.00px; height: 350.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1"><span class="c7">Zauwa&#380;, &#380;e po wybraniu operacji, nie ma ju&#380; teraz mo&#380;liwo&#347;ci wybrania kolejnej. Trzeba wybra&#263; liczb&#281;, tak&#380;e nie ma mo&#380;liwo&#347;ci wybrania kilku operacji jedna po drugiej, poniewa&#380; zosta&#322;y zablokowane. Zawsze po wybraniu operacji b&#281;dziemy oczekiwa&#263; na podanie liczby i o to chodzi&#322;o.</span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p><p class="c1 c5"><span class="c2"></span></p></body></html>